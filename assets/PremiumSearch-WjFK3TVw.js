import{r as t,u as q,j as e,n as v,v as U,w as z,x as J,o as y,L as u,I as K,p as S,B as x,c as Q,A as X,y as Z,a as _,t as ee,D as se}from"./index-DNiQmp5B.js";import{S as C,a as w,b as A,c as N,d as s,e as T,f as P,P as ae,T as te,G as le}from"./index-5r1jAB5B.js";import{M as re}from"./index-DNuHytCn.js";function de(){const[i,D]=t.useState(""),[h,p]=t.useState(1),[r,o]=t.useState(!1),[d,k]=t.useState(null),[E,m]=t.useState(0),[b,g]=t.useState(!1),[I,L]=t.useState(""),[M,F]=t.useState(""),[ie,G]=t.useState(!0),[f,O]=t.useState(""),n=(a,l,c)=>{F(a),L(l),g(!0),setTimeout(()=>g(!1),c)},H=q(),W=a=>{D(a.target.value)},B=async()=>{try{const a=await ee();console.log("checking login at search page.",a),a==!1?H("/login"):G(!1)}catch(a){throw console.error("Error while checking logged in user at searchPage: ",a),a}};t.useEffect(()=>{B()},[]);const R=a=>{const l=Number(a);l>0&&l<=3&&p(l)};t.useEffect(()=>{let a;return r&&(a=setInterval(()=>{m(l=>l<90?l+10:l)},2e3)),()=>{clearInterval(a)}},[r]);const V=`Plan a ${h}-day trip to ${i}. ${f.length>0?`Include this activity if possible: ${f}.`:""} Start with a title like "Explore [CITY]."

For each day:
1. **Theme**: Focus of the day (e.g., culture, nature, history).
2. **Morning**: Activities, food, accommodations.
3. **Afternoon**: Activities and meals.
4. **Evening**: Nightlife, restaurants, relaxation.

After the plan:
- **Travel Tips**: Advice on navigating [CITY], safety, culture, best times to visit.
- **Budget**: Estimate costs for accommodations, food, and activities per day.

Format all output in **Markdown**.`,$=async()=>{const l=new le(void 0).getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{candidateCount:1,maxOutputTokens:2e3,temperature:.7}});if(!i){n("Add Data","Please Provide City",3e3);return}if(h===0){n("Add Data","Please Provide Days",3e3);return}try{o(!0),n("In Progress...","Please Wait. Search Request Has Been Made To Server. Be Patient.",3e3),m(0);const c=await l.generateContent(V);k(c.response.text())}catch(c){console.error("Error occurred:",c),n("Could Not Search","Error Happend While Searching",3e3)}finally{p(0),o(!1)}},Y=a=>{O(a)},j=async()=>{o(!0),i&&d&&(await se(i,d),console.log("data inserted successfully from search page."),n("Saving Data","Please Wait Saving Data",3e3),o(!1))};return e.jsxs("div",{className:"min-h-screen w-full p-4 md:p-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs(v,{className:"w-full lg:w-[30%] h-fit shadow-lg",children:[e.jsxs(U,{children:[e.jsx(z,{className:"font-semibold text-xl",children:"Plan Your Trip"}),e.jsx(J,{className:"text-lg",children:"Generate Trip Plan With One Click."})]}),e.jsx(y,{children:e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx(u,{htmlFor:"city",children:"City"}),e.jsx(K,{type:"text",id:"city",value:i,onChange:W,placeholder:"Enter The City Name"})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx(u,{htmlFor:"days",children:"Days"}),e.jsxs(C,{value:String(h),onValueChange:R,children:[e.jsx(w,{id:"days",children:e.jsx(A,{placeholder:"Select Days"})}),e.jsxs(N,{children:[e.jsx(s,{value:"1",children:"1 Day"}),e.jsx(s,{value:"2",children:"2 Days"}),e.jsx(s,{value:"3",children:"3 Days"}),e.jsx(s,{value:"4",children:"4 Day"}),e.jsx(s,{value:"5",children:"5 Days"}),e.jsx(s,{value:"6",children:"6 Days"}),e.jsx(s,{value:"7",children:"7 Days"})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx(u,{htmlFor:"framework",children:"Customiztion"}),e.jsxs(C,{onValueChange:Y,children:[e.jsx(w,{id:"framework",children:e.jsx(A,{placeholder:"Select"})}),e.jsxs(N,{position:"popper",children:[e.jsxs(T,{children:[e.jsx(P,{children:"Popular Options"}),e.jsx(s,{value:"cuisines",children:"Explore Local Cuisines"}),e.jsx(s,{value:"landmarks",children:"Visit Historical Landmarks"}),e.jsx(s,{value:"temples",children:"Explore Local Temples"}),e.jsx(s,{value:"nature",children:"Relax at Scenic Nature Spots"}),e.jsx(s,{value:"nightlife",children:"Discover Nightlife & Entertainment"}),e.jsx(s,{value:"shopping",children:"Shopping & Local Markets"})]}),e.jsxs(T,{children:[e.jsx(P,{children:"Unique Options"}),e.jsx(s,{value:"hidden-gems",children:"Hidden Cultural Gems"}),e.jsx(s,{value:"adventure",children:"Outdoor Adventure & Hiking"}),e.jsx(s,{value:"art-architecture",children:"Art & Architecture Exploration"}),e.jsx(s,{value:"wellness",children:"Wellness & Spa Retreats"}),e.jsx(s,{value:"sustainable",children:"Sustainable Travel"}),e.jsx(s,{value:"craftsmanship",children:"Local Craftsmanship & Workshops"}),e.jsx(s,{value:"photography",children:"Photographer`s Paradise"})]})]})]})]})]})}),e.jsxs(S,{className:"flex justify-between gap-4",children:[e.jsx(x,{onClick:$,disabled:r,className:"w-full",children:r?"Searching ...":"Search"}),e.jsx(x,{variant:"outline",disabled:r,className:"w-full",onClick:j,children:e.jsx(Q,{to:"/saved-trip",children:"Saved Trip"})})]})]}),d&&e.jsxs(v,{className:"w-full lg:w-[65%] max-h-[80vh] overflow-y-auto",children:[e.jsx(y,{className:"px-4 py-4",children:e.jsx(re,{children:d})}),e.jsx(S,{className:"flex justify-center",children:e.jsx(x,{disabled:r,onClick:j,children:"Save Trip"})})]})]}),r&&e.jsx("div",{className:"w-full mt-8",children:e.jsx(ae,{value:E})}),b&&e.jsxs(X,{variant:"default",className:"w-full mt-8",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsxs(Z,{children:[" ",M]}),e.jsx(_,{children:I})]})]})}export{de as default};
